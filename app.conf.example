[app]
# possible environment values are: development, production
environment = development
base_url = http://localhost:8001
# continue url of max
redirect_url = https://localhost:8006/continue

http_timeout = 30
http_retries = 20
http_backof_time = 5

loglevel = debug

# Enable of disable the ZSM OIDC login method feature.
# The settings under the [oidc_provider] section needs to be set up correctly
oidc_login_method_feature = False

include_log_message_in_error_response = True
version_file_path = static/version.json

[session]
jwt_issuer=nl-rdo-max-private
jwt_issuer_crt_path=secrets/nl-rdo-max-private.crt
jwt_audience=nl-uzi-login-controller

[redis]
# Connecting to the redis server through parameters:
host = localhost
port = 6379

# SSL settings, to create a TLS connection to the redis store.
ssl = False
key =
cert =
cafile =
check_hostname = True

# Application specific redis settings
namespace = nl-uzi-login-controller
expire = 300

[yivi]
yivi_internal_server_url = https://yivi.proeftuin.uzi-online.rdobeheer.nl
yivi_disclose_prefix = irma-demo.uzipoc-cibg.uzi-proeftuin
yivi_revocation = true
# Enable or disable authentication for Yivi server requests
# See Yivi documentation about te requestor authentication: https://docs.yivi.app/irma-server/#requestor-authentication
# If enabled, requests will be signed as JWS using the specified private key and issuer
yivi_authentication_enabled = False
# Issuer value to use in the JWS for Yivi authentication
yivi_authentication_issuer =
# Path to the private key used for signing JWS for Yivi authentication
yivi_authentication_priv_key_path =
# If session_server_events_enabled = True: use Server Sent Events for checking the status of the Yivi session during login
session_server_events_enabled = True
# After ... ms the front-end should stop trying to check session status through Server Sent Events in case of failure
session_server_events_timeout = 2000
# The front-end should poll for the yivi session status every ... ms (fallback for SSE, or primary when SSE is disabled)
session_polling_interval = 1000

[uvicorn]
# The host to be running on
host = 0.0.0.0
port = 8001

# Are we running in debug mode? turns on auto-reload on code changes
reload = True
workers = 1

# Should we create an SSL connection through uvicorn?
use_ssl = False

# Setting for the SSL connection when enabled, defined by the use_ssl setting.
# Directory containing SSL secrets (certificates and keys)
base_dir = secrets/ssl
# Server SSL certificate file name (relative to base_dir)
cert_file = server.crt
# Server SSL private key file name (relative to base_dir)
key_file = server.key
# File patterns to reload when configuration changes
reload_includes = *.conf *.json

# Section for ZSM OIDC (OpenID Connect) provider configuration
# Required when oidc_login_method_feature is enabled
[oidc_provider]
# Path to the OIDC providers configuration list (JSON format)
config_list_path=oidc-providers-list.json

# Path to private key used for signing JWTs for authentication to the OIDC provider
# This key is used if the provider `token_endpoint_auth_method` is set to `private_key_jwt`
jwt_priv_key_path = secrets/nl-uzi-login-controller.key
# Path to certificate used for setting the kid in the signed JWT
jwt_crt_path = secrets/nl-uzi-login-controller.crt

# The issuer of the JWT inside the signed_userinfo claim, provided by ZSM OIDC Provider in the userinfo.
# For the POC, this should be the same issuer as configured in max.
# The audience is not relevant for this POC, for the future this should be the OIDC Provider;
# Currently only the issuer and the signing certificate matters for validation.
signed_userinfo_issuer = max

# Section for template configuration
[templates]
# Directory containing Jinja2 templates
jinja_path = jinja2
# Path to Vite manifest file for static assets
vite_manifest_path = static/assets/manifest.json

# Section for API documentation endpoints
[docs]
# Enable or disable documentation endpoints
enabled = True
# URL endpoint for Swagger UI documentation
swagger_ui_endpoint = /docs
# URL endpoint for Redoc documentation
redoc_endpoint = /redoc
# URL endpoint for OpenAPI specification
openapi_endpoint = /openapi.json

# Section for register configuration
# The register connects to the login controller to the session result endpoint with an signed JWT.
[register]
# Path to register certificate
# This certificate is used to verify the signature of the JWTs from the register.
register_api_crt_path = secrets/nl-uzipoc-register-api.crt

# validate the the issuer and audience in the received JWT from the register
session_result_jwt_issuer = uzipoc_register
session_result_jwt_audience = nl-uzi-login-controller